<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Packer Efficiency Dashboard</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header>
    <h1>Packer Efficiency Dashboard</h1>
    <p>Track missed nozzles, undropped bags, and YOLO-based detections in real-time.</p>
  </header>

  <main class="layout">
    <section class="card">
      <h2>Packer master data</h2>
      <form id="packer-form">
        <label>Name <input type="text" id="packer-name" required /></label>
        <label>Spout count <input type="number" id="spout-count" value="8" min="1" required /></label>
        <label>RPM <input type="number" step="0.1" id="rpm" value="5" min="0.1" required /></label>
        <button type="submit">Save packer</button>
        <button type="button" id="seed-btn" class="ghost">Seed demo data</button>
      </form>
      <div id="packer-list"></div>
    </section>

    <section class="card">
      <h2>Live camera feed</h2>
      <div class="live-feed">
        <img id="live-image" alt="Live camera frame" />
        <pre id="detection-meta"></pre>
      </div>
    </section>

    <section class="card">
      <h2>Efficiency</h2>
      <div id="efficiency-output" class="metrics"></div>
      <form id="event-form">
        <div class="row">
          <label>Packer <select id="event-packer"></select></label>
          <label>Spout # <input type="number" id="event-spout" min="1" required /></label>
          <label>Event
            <select id="event-type">
              <option value="normal_drop">Normal drop</option>
              <option value="empty_nozzle">Empty nozzle (no bag placed)</option>
              <option value="undropped_bag">Undropped bag (still filling)</option>
            </select>
          </label>
        </div>
        <button type="submit">Log event</button>
      </form>
      <div id="event-table"></div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
